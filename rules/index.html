
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Lint checks to aid with a healthy adoption of Compose">
      
      
        <meta name="author" content="Slack">
      
      
      
        <link rel="prev" href="..">
      
      
        <link rel="next" href="../changelog/">
      
      
      <link rel="icon" href="../images/slack_logo_small.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.39">
    
    
      
        <title>Rules - compose-lints</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.8c3ca2c6.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:300,300i,400,400i,700,700i%7CFira+Code:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Lato";--md-code-font:"Fira Code"}</style>
      
    
    
      <link rel="stylesheet" href="../css/app.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="green">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#state" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="compose-lints" class="md-header__button md-logo" aria-label="compose-lints" data-md-component="logo">
      
  <img src="../images/slack_logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            compose-lints
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Rules
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="green"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="green"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/slackhq/compose-lints" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    compose-lints
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="compose-lints" class="md-nav__button md-logo" aria-label="compose-lints" data-md-component="logo">
      
  <img src="../images/slack_logo.png" alt="logo">

    </a>
    compose-lints
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/slackhq/compose-lints" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    compose-lints
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Rules
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Rules
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#state" class="md-nav__link">
    <span class="md-ellipsis">
      State
    </span>
  </a>
  
    <nav class="md-nav" aria-label="State">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hoist-all-the-things" class="md-nav__link">
    <span class="md-ellipsis">
      Hoist all the things
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#state-should-be-remembered-in-composables" class="md-nav__link">
    <span class="md-ellipsis">
      State should be remembered in composables
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#avoid-using-unstable-collections" class="md-nav__link">
    <span class="md-ellipsis">
      Avoid using unstable collections
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#composables" class="md-nav__link">
    <span class="md-ellipsis">
      Composables
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Composables">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#do-not-use-inherently-mutable-types-as-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      Do not use inherently mutable types as parameters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unstable-receivers" class="md-nav__link">
    <span class="md-ellipsis">
      Unstable receivers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#do-not-emit-content-and-return-a-result" class="md-nav__link">
    <span class="md-ellipsis">
      Do not emit content and return a result
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#do-not-emit-multiple-pieces-of-content" class="md-nav__link">
    <span class="md-ellipsis">
      Do not emit multiple pieces of content
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#do-not-invoke-slots-in-more-than-once-place" class="md-nav__link">
    <span class="md-ellipsis">
      Do not invoke slots in more than once place
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#naming-multipreview-annotations-properly" class="md-nav__link">
    <span class="md-ellipsis">
      Naming multipreview annotations properly
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#naming-composable-functions-properly" class="md-nav__link">
    <span class="md-ellipsis">
      Naming @Composable functions properly
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ordering-composable-parameters-properly" class="md-nav__link">
    <span class="md-ellipsis">
      Ordering @Composable parameters properly
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#make-dependencies-explicit" class="md-nav__link">
    <span class="md-ellipsis">
      Make dependencies explicit
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Make dependencies explicit">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#viewmodels" class="md-nav__link">
    <span class="md-ellipsis">
      ViewModels
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#compositionlocals" class="md-nav__link">
    <span class="md-ellipsis">
      CompositionLocals
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#preview-composables-should-not-be-public" class="md-nav__link">
    <span class="md-ellipsis">
      Preview composables should not be public
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modifiers" class="md-nav__link">
    <span class="md-ellipsis">
      Modifiers
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Modifiers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#when-should-i-expose-modifier-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      When should I expose modifier parameters?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dont-re-use-modifiers" class="md-nav__link">
    <span class="md-ellipsis">
      Don&rsquo;t re-use modifiers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modifiers-should-have-default-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      Modifiers should have default parameters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#avoid-modifier-extension-factory-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Avoid Modifier extension factory functions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#migrate-to-modifiernode" class="md-nav__link">
    <span class="md-ellipsis">
      Migrate to Modifier.Node
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use-material-3" class="md-nav__link">
    <span class="md-ellipsis">
      Use Material 3
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="https://github.com/slackhq/compose-lints/discussions" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Discussions ⏏
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../changelog/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Change Log
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/0.x/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    API
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../contributing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contributing
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../code-of-conduct/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CoC
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#state" class="md-nav__link">
    <span class="md-ellipsis">
      State
    </span>
  </a>
  
    <nav class="md-nav" aria-label="State">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hoist-all-the-things" class="md-nav__link">
    <span class="md-ellipsis">
      Hoist all the things
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#state-should-be-remembered-in-composables" class="md-nav__link">
    <span class="md-ellipsis">
      State should be remembered in composables
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#avoid-using-unstable-collections" class="md-nav__link">
    <span class="md-ellipsis">
      Avoid using unstable collections
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#composables" class="md-nav__link">
    <span class="md-ellipsis">
      Composables
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Composables">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#do-not-use-inherently-mutable-types-as-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      Do not use inherently mutable types as parameters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unstable-receivers" class="md-nav__link">
    <span class="md-ellipsis">
      Unstable receivers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#do-not-emit-content-and-return-a-result" class="md-nav__link">
    <span class="md-ellipsis">
      Do not emit content and return a result
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#do-not-emit-multiple-pieces-of-content" class="md-nav__link">
    <span class="md-ellipsis">
      Do not emit multiple pieces of content
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#do-not-invoke-slots-in-more-than-once-place" class="md-nav__link">
    <span class="md-ellipsis">
      Do not invoke slots in more than once place
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#naming-multipreview-annotations-properly" class="md-nav__link">
    <span class="md-ellipsis">
      Naming multipreview annotations properly
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#naming-composable-functions-properly" class="md-nav__link">
    <span class="md-ellipsis">
      Naming @Composable functions properly
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ordering-composable-parameters-properly" class="md-nav__link">
    <span class="md-ellipsis">
      Ordering @Composable parameters properly
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#make-dependencies-explicit" class="md-nav__link">
    <span class="md-ellipsis">
      Make dependencies explicit
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Make dependencies explicit">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#viewmodels" class="md-nav__link">
    <span class="md-ellipsis">
      ViewModels
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#compositionlocals" class="md-nav__link">
    <span class="md-ellipsis">
      CompositionLocals
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#preview-composables-should-not-be-public" class="md-nav__link">
    <span class="md-ellipsis">
      Preview composables should not be public
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modifiers" class="md-nav__link">
    <span class="md-ellipsis">
      Modifiers
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Modifiers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#when-should-i-expose-modifier-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      When should I expose modifier parameters?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dont-re-use-modifiers" class="md-nav__link">
    <span class="md-ellipsis">
      Don&rsquo;t re-use modifiers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modifiers-should-have-default-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      Modifiers should have default parameters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#avoid-modifier-extension-factory-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Avoid Modifier extension factory functions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#migrate-to-modifiernode" class="md-nav__link">
    <span class="md-ellipsis">
      Migrate to Modifier.Node
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use-material-3" class="md-nav__link">
    <span class="md-ellipsis">
      Use Material 3
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


  <h1>Rules</h1>

<h2 id="state">State<a class="headerlink" href="#state" title="Permanent link">&para;</a></h2>
<h3 id="hoist-all-the-things">Hoist all the things<a class="headerlink" href="#hoist-all-the-things" title="Permanent link">&para;</a></h3>
<p>Compose is built upon the idea of a <a href="https://developer.android.com/jetpack/compose/state#state-hoisting">unidirectional data flow</a>, which can be summarised as: data/state flows down, and events fire up. To implement that, Compose advocates for the pattern of <a href="https://developer.android.com/jetpack/compose/state#state-hoisting">hoisting state</a> upwards, enabling the majority of your composable functions to be stateless. This has many benefits, including far easier testing.</p>
<p>In practice, there are a few common things to look out for:</p>
<ul>
<li>Do not pass ViewModels (or objects from DI) down.</li>
<li>Do not pass <code>State&lt;Foo&gt;</code> or <code>MutableState&lt;Bar&gt;</code> instances down.</li>
</ul>
<p>Instead, pass down the relevant data to the function, and optional lambdas for callbacks.</p>
<p>More information: <a href="https://developer.android.com/jetpack/compose/state">State and Jetpack Compose</a></p>
<p>Related rule: <a href="https://github.com/slackhq/compose-lints/blob/main/compose-lint-checks/src/main/java/slack/lint/compose/ViewModelForwardingDetector.kt"><code>ComposeViewModelForwarding</code></a></p>
<h3 id="state-should-be-remembered-in-composables">State should be remembered in composables<a class="headerlink" href="#state-should-be-remembered-in-composables" title="Permanent link">&para;</a></h3>
<p>Be careful when using <code>mutableStateOf</code> (or any of the other state builders) to make sure that you <code>remember</code> the instance. If you don&rsquo;t <code>remember</code> the state instance, a new state instance will be created when the function is recomposed.</p>
<p>Related rule: <a href="https://github.com/slackhq/compose-lints/blob/main/compose-lint-checks/src/main/java/slack/lint/compose/RememberMissingDetector.kt"><code>ComposeRememberMissing</code></a></p>
<h3 id="avoid-using-unstable-collections">Avoid using unstable collections<a class="headerlink" href="#avoid-using-unstable-collections" title="Permanent link">&para;</a></h3>
<p>Collections are defined as interfaces (e.g. <code>List&lt;T&gt;</code>, <code>Map&lt;T&gt;</code>, <code>Set&lt;T&gt;</code>) in Kotlin, which can&rsquo;t guarantee that they are actually immutable. For example, you could write:</p>
<div class="highlight"><pre><span></span><code><span class="kd">val</span><span class="w"> </span><span class="nv">list</span><span class="p">:</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="kt">String</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mutableListOf</span><span class="o">&lt;</span><span class="kt">String</span><span class="o">&gt;</span><span class="p">()</span>
</code></pre></div>
<p>The variable is constant, its declared type is not mutable but its implementation is still mutable. The Compose compiler cannot be sure of the immutability of this class as it just sees the declared type and as such declares it as unstable.</p>
<p>To force the compiler to see a collection as truly &lsquo;immutable&rsquo; you have a couple of options.</p>
<p>You can use <a href="https://github.com/Kotlin/kotlinx.collections.immutable">Kotlinx Immutable Collections</a>:</p>
<div class="highlight"><pre><span></span><code><span class="kd">val</span><span class="w"> </span><span class="nv">list</span><span class="p">:</span><span class="w"> </span><span class="n">ImmutableList</span><span class="o">&lt;</span><span class="kt">String</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">persistentListOf</span><span class="o">&lt;</span><span class="kt">String</span><span class="o">&gt;</span><span class="p">()</span>
</code></pre></div>
<p>Alternatively, you can wrap your collection in an annotated stable class to mark it as immutable for the Compose compiler.</p>
<div class="highlight"><pre><span></span><code><span class="nd">@Immutable</span>
<span class="kd">data</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nc">StringList</span><span class="p">(</span><span class="kd">val</span><span class="w"> </span><span class="nv">items</span><span class="p">:</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="kt">String</span><span class="o">&gt;</span><span class="p">)</span>
<span class="c1">// ...</span>
<span class="kd">val</span><span class="w"> </span><span class="nv">list</span><span class="p">:</span><span class="w"> </span><span class="n">StringList</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">StringList</span><span class="p">(</span><span class="n">yourList</span><span class="p">)</span>
</code></pre></div>
<blockquote>
<p><strong>Note</strong>: It is preferred to use Kotlinx Immutable Collections for this. As you can see, the wrapped case only includes the immutability promise with the annotation, but the underlying List is still mutable.
More info: <a href="https://medium.com/androiddevelopers/jetpack-compose-stability-explained-79c10db270c8">Jetpack Compose Stability Explained</a>, <a href="https://github.com/Kotlin/kotlinx.collections.immutable">Kotlinx Immutable Collections</a></p>
</blockquote>
<p>Related rule: <a href="https://github.com/slackhq/compose-lints/blob/main/compose-lint-checks/src/main/java/slack/lint/compose/UnstableCollectionsDetector.kt"><code>ComposeUnstableCollections</code></a></p>
<h2 id="composables">Composables<a class="headerlink" href="#composables" title="Permanent link">&para;</a></h2>
<h3 id="do-not-use-inherently-mutable-types-as-parameters">Do not use inherently mutable types as parameters<a class="headerlink" href="#do-not-use-inherently-mutable-types-as-parameters" title="Permanent link">&para;</a></h3>
<p>This practice follows on from the &lsquo;Hoist all the things&rsquo; item above, where we said that state flows down. It might be tempting to pass mutable state down to a function to mutate the value.</p>
<p>This is an anti-pattern though as it breaks the pattern of state flowing down, and events firing up. The mutation of the value is an event which should be modelled within the function API (a lambda callback).</p>
<p>There are a few reasons for this, but the main one is that it is very easy to use a mutable object which does not trigger recomposition. Without triggering recomposition, your composables will not automatically update to reflect the updated value.</p>
<p>Passing <code>ArrayList&lt;T&gt;</code>, <code>MutableState&lt;T&gt;</code>, <code>ViewModel</code> are common examples of this (but not limited to those types).</p>
<p>Related rule: <a href="https://github.com/slackhq/compose-lints/blob/main/compose-lint-checks/src/main/java/slack/lint/compose/MutableParametersDetector.kt"><code>ComposeMutableParameters</code></a></p>
<h3 id="unstable-receivers">Unstable receivers<a class="headerlink" href="#unstable-receivers" title="Permanent link">&para;</a></h3>
<p>In compose, all parameters must be stable or immutable in order for a composable function to be
<em>restartable</em> or <em>skippable</em>. This <em>includes</em> the containing class or receiver, which the compose-compiler will treat as the 0<sup>th</sup> argument. Using an unstable receiver is usually a bug, so this lint offers a warning to raise this issue.</p>
<p>More info: <a href="https://developer.android.com/jetpack/compose/performance/stability">Compose API Stability</a></p>
<p>Related rule: <a href="https://github.com/slackhq/compose-lints/blob/main/compose-lint-checks/src/main/java/slack/lint/compose/UnstableReceiverDetector.kt"><code>ComposeUnstableReceiver</code></a></p>
<h3 id="do-not-emit-content-and-return-a-result">Do not emit content and return a result<a class="headerlink" href="#do-not-emit-content-and-return-a-result" title="Permanent link">&para;</a></h3>
<p>Composable functions should either emit layout content, or return a value, but not both.</p>
<p>If a composable should offer additional control surfaces to its caller, those control surfaces or callbacks should be provided as parameters to the composable function by the caller.</p>
<p>More info: <a href="https://github.com/androidx/androidx/blob/androidx-main/compose/docs/compose-api-guidelines.md#emit-xor-return-a-value">Compose API guidelines</a></p>
<p>Related rule: <a href="https://github.com/slackhq/compose-lints/blob/main/compose-lint-checks/src/main/java/slack/lint/compose/ContentEmitterReturningValuesDetector.kt"><code>ComposeContentEmitterReturningValues</code></a></p>
<div class="admonition note">
<p class="admonition-title">Configuration</p>
<p>To add your custom composables so they are used in this rule (things like your design system composables), you can configure a <code>content-emitters</code> option in <code>lint.xml</code>.</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;issue</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;ComposeMultipleContentEmitters&quot;</span><span class="nt">&gt;</span>
<span class="w">   </span><span class="nt">&lt;option</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;content-emitters&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;CustomEmitter,AnotherEmitter&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;/issue&gt;</span>
</code></pre></div>
</div>
<h3 id="do-not-emit-multiple-pieces-of-content">Do not emit multiple pieces of content<a class="headerlink" href="#do-not-emit-multiple-pieces-of-content" title="Permanent link">&para;</a></h3>
<p>A composable function should emit either 0 or 1 pieces of layout, but no more. A composable function should be cohesive, and not rely on what function it is called from.</p>
<p>You can see an example of what not to do below. <code>InnerContent()</code> emits a number of layout nodes and assumes that it will be called from a Column:</p>
<div class="highlight"><pre><span></span><code><span class="n">Column</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">InnerContent</span><span class="p">()</span>
<span class="p">}</span>
<span class="nd">@Composable</span>
<span class="kd">private</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="nf">InnerContent</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">Text</span><span class="p">(...)</span>
<span class="w">    </span><span class="n">Image</span><span class="p">(...)</span>
<span class="w">    </span><span class="n">Button</span><span class="p">(...)</span>
<span class="p">}</span>
</code></pre></div>
<p>However InnerContent could just as easily be called from a Row which would break all assumptions. Instead, InnerContent should be cohesive and emit a single layout node itself:</p>
<p><div class="highlight"><pre><span></span><code><span class="nd">@Composable</span>
<span class="kd">private</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="nf">InnerContent</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">Column</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Text</span><span class="p">(...)</span>
<span class="w">        </span><span class="n">Image</span><span class="p">(...)</span>
<span class="w">        </span><span class="n">Button</span><span class="p">(...)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
Nesting of layouts has a drastically lower cost vs the view system, so developers should not try to minimize UI layers at the cost of correctness.</p>
<p>There is a slight exception to this rule, which is when the function is defined as an extension function of an appropriate scope, like so:
<div class="highlight"><pre><span></span><code><span class="nd">@Composable</span>
<span class="kd">private</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="n">ColumnScope</span><span class="p">.</span><span class="nf">InnerContent</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">Text</span><span class="p">(...)</span>
<span class="w">    </span><span class="n">Image</span><span class="p">(...)</span>
<span class="w">    </span><span class="n">Button</span><span class="p">(...)</span>
<span class="p">}</span>
</code></pre></div>
This effectively ties the function to be called from a Column, but is still not recommended (although permitted).</p>
<p>Related rule: <a href="https://github.com/slackhq/compose-lints/blob/main/compose-lint-checks/src/main/java/slack/lint/compose/MultipleContentEmittersDetector.kt"><code>ComposeMultipleContentEmitters</code></a></p>
<div class="admonition note">
<p class="admonition-title">Configuration</p>
<p>To add your custom composables so they are used in this rule (things like your design system composables), you can configure a <code>content-emitters</code> option in <code>lint.xml</code>.</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;issue</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;ComposeMultipleContentEmitters&quot;</span><span class="nt">&gt;</span>
<span class="w">   </span><span class="nt">&lt;option</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;content-emitters&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;CustomEmitter,AnotherEmitter&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;/issue&gt;</span>
</code></pre></div>
</div>
<h3 id="do-not-invoke-slots-in-more-than-once-place">Do not invoke slots in more than once place<a class="headerlink" href="#do-not-invoke-slots-in-more-than-once-place" title="Permanent link">&para;</a></h3>
<p>Slot parameters provide a convenient and idiomatic way to accept arbitrary content for a component.</p>
<p>Callers of a component that takes a slot parameter have natural expectations about the lifecycle of
that slot.
Specifically, the slot should either be composed (invoked) in exactly one place, or not invoked at
all.
Even if there are visual or structure changes inside the component, callers expect the internal
state of the slot to be preserved.</p>
<p>Components should either use custom layouts to meet this expectation or <code>movableContentOf</code>.</p>
<p>More information: <a href="https://android.googlesource.com/platform/frameworks/support/+/androidx-main/compose/docs/compose-component-api-guidelines.md#lifecycle-expectations-for-slot-parameters">Lifecycle expectations for slot parameters</a></p>
<p>Related rule: <a href="https://github.com/slackhq/compose-lints/blob/main/compose-lint-checks/src/main/java/slack/lint/compose/SlotReusedDetector.kt"><code>SlotReused</code></a></p>
<h3 id="naming-multipreview-annotations-properly">Naming multipreview annotations properly<a class="headerlink" href="#naming-multipreview-annotations-properly" title="Permanent link">&para;</a></h3>
<p>Multipreview annotations should be named by using <code>Previews</code> as suffix (or <code>Preview</code> if just one). These annotations have to be explicitly named to make sure that they are clearly identifiable as a <code>@Preview</code> alternative on its usages.</p>
<p>More information: <a href="https://developer.android.com/develop/ui/compose/tooling/previews#preview-multiple">Multipreview annotations</a></p>
<p>Related rule: <a href="https://github.com/slackhq/compose-lints/blob/main/compose-lint-checks/src/main/java/slack/lint/compose/PreviewNamingDetector.kt"><code>ComposePreviewNaming</code></a></p>
<h3 id="naming-composable-functions-properly">Naming @Composable functions properly<a class="headerlink" href="#naming-composable-functions-properly" title="Permanent link">&para;</a></h3>
<p>Composable functions that return <code>Unit</code> should start with an uppercase letter. They are considered declarative entities that can be either present or absent in a composition and therefore follow the naming rules for classes.</p>
<p>However, Composable functions that return a value should start with a lowercase letter instead. They should follow the standard <a href="https://kotlinlang.org/docs/reference/coding-conventions.html#function-names">Kotlin Coding Conventions</a> for the naming of functions for any function annotated <code>@Composable</code> that returns a value other than <code>Unit</code></p>
<p>More information: <a href="https://github.com/androidx/androidx/blob/androidx-main/compose/docs/compose-api-guidelines.md#naming-unit-composable-functions-as-entities">Naming Unit @Composable functions as entities</a> and <a href="https://github.com/androidx/androidx/blob/androidx-main/compose/docs/compose-api-guidelines.md#naming-composable-functions-that-return-values">Naming @Composable functions that return values</a></p>
<p>Related rules: <a href="https://github.com/slackhq/compose-lints/blob/main/compose-lint-checks/src/main/java/slack/lint/compose/ComposableFunctionNamingDetector.kt"><code>ComposeNamingUppercase</code>,<code>ComposeNamingLowercase</code></a></p>
<div class="admonition note">
<p class="admonition-title">Configuration</p>
<p>To allow certain regex patterns of names, you can configure the <code>allowed-composable-function-names</code> option in <code>lint.xml</code>.</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;issue</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;ComposeNamingUppercase,ComposeNamingLowercase&quot;</span><span class="nt">&gt;</span>
<span class="w">   </span><span class="nt">&lt;option</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;allowed-composable-function-names&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;.*Presenter&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;/issue&gt;</span>
</code></pre></div>
</div>
<h3 id="ordering-composable-parameters-properly">Ordering @Composable parameters properly<a class="headerlink" href="#ordering-composable-parameters-properly" title="Permanent link">&para;</a></h3>
<p>When writing Kotlin, it&rsquo;s a good practice to write the parameters for your methods by putting the mandatory parameters first, followed by the optional ones (aka the ones with default values). By doing so, <a href="https://kotlinlang.org/docs/functions.html#default-arguments">we minimize the number times we will need to write the name for arguments explicitly</a>.</p>
<p>Modifiers occupy the first optional parameter slot to set a consistent expectation for developers that they can always provide a modifier as the final positional parameter to an element call for any given element&rsquo;s common case.</p>
<p>More information: <a href="https://kotlinlang.org/docs/functions.html#default-arguments">Kotlin default arguments</a>, <a href="https://developer.android.com/reference/kotlin/androidx/compose/ui/Modifier">Modifier docs</a> and <a href="https://github.com/androidx/androidx/blob/androidx-main/compose/docs/compose-api-guidelines.md#why-8">Elements accept and respect a Modifier parameter</a>.</p>
<p>Related rule: <a href="https://github.com/slackhq/compose-lints/blob/main/compose-lint-checks/src/main/java/slack/lint/compose/ParameterOrderDetector.kt"><code>ComposeParameterOrder</code></a></p>
<h3 id="make-dependencies-explicit">Make dependencies explicit<a class="headerlink" href="#make-dependencies-explicit" title="Permanent link">&para;</a></h3>
<h4 id="viewmodels">ViewModels<a class="headerlink" href="#viewmodels" title="Permanent link">&para;</a></h4>
<p>When designing composables, try to be explicit about the dependencies they take in. If you acquire a <code>ViewModel</code> or an instance from DI in the body of the composable, you are making this dependency implicit, which has the downsides of making it hard to test and harder to reuse.</p>
<p>To solve this problem, you should inject these dependencies as default values in the composable function.</p>
<p>Let&rsquo;s see it with an example.</p>
<p><div class="highlight"><pre><span></span><code><span class="nd">@Composable</span>
<span class="kd">private</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="nf">MyComposable</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">viewModel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">viewModel</span><span class="o">&lt;</span><span class="n">MyViewModel</span><span class="o">&gt;</span><span class="p">()</span>
<span class="w">    </span><span class="c1">// ...</span>
<span class="p">}</span>
</code></pre></div>
In this composable, the dependencies are implicit. When testing it you would need to fake the internals of viewModel somehow to be able to acquire your intended ViewModel.</p>
<p>But, if you change it to pass these instances via the composable function parameters, you could provide the instance you want directly in your tests without any extra effort. It would also have the upside of the function being explicit about its external dependencies in its signature.</p>
<div class="highlight"><pre><span></span><code><span class="nd">@Composable</span>
<span class="kd">private</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="nf">MyComposable</span><span class="p">(</span>
<span class="w">    </span><span class="n">viewModel</span><span class="p">:</span><span class="w"> </span><span class="n">MyViewModel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">viewModel</span><span class="p">(),</span>
<span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// ...</span>
<span class="p">}</span>
</code></pre></div>
<p>Related rule: <a href="https://github.com/slackhq/compose-lints/blob/main/compose-lint-checks/src/main/java/slack/lint/compose/ViewModelInjectionDetector.kt"><code>ComposeViewModelInjection</code></a></p>
<h4 id="compositionlocals"><code>CompositionLocal</code>s<a class="headerlink" href="#compositionlocals" title="Permanent link">&para;</a></h4>
<p><code>CompositionLocal</code> makes a composable&rsquo;s behavior harder to reason about. As they create implicit dependencies, callers of composables that use them need to make sure that a value for every CompositionLocal is satisfied.</p>
<p>Although uncommon, there are <a href="https://developer.android.com/jetpack/compose/compositionlocal#deciding">legit use cases</a> for them, so this rule provides an allowlist so that you can add your <code>CompositionLocal</code> names to it so that they are not flagged by the rule.</p>
<p>Related rule: <a href="https://github.com/slackhq/compose-lints/blob/main/compose-lint-checks/src/main/java/slack/lint/compose/CompositionLocalUsageDetector.kt"><code>ComposeCompositionLocalUsage</code></a></p>
<div class="admonition note">
<p class="admonition-title">Configuration</p>
<p>To add your custom <code>CompositionLocal</code> to your allowlist, you can configure a <code>allowed-composition-locals</code> option in <code>lint.xml</code>.</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;issue</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;ComposeCompositionLocalUsage&quot;</span><span class="nt">&gt;</span>
<span class="w">   </span><span class="nt">&lt;option</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;allowed-composition-locals&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;LocalEnabled,LocalThing&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;/issue&gt;</span>
</code></pre></div>
</div>
<h3 id="preview-composables-should-not-be-public">Preview composables should not be public<a class="headerlink" href="#preview-composables-should-not-be-public" title="Permanent link">&para;</a></h3>
<p>When a composable function exists solely because it&rsquo;s a <code>@Preview</code>, it doesn&rsquo;t need to have public visibility because it won&rsquo;t be used in actual UI. To prevent folks from using it unknowingly, we should restrict its visibility to <code>private</code>.</p>
<p>Related rule: <a href="https://github.com/slackhq/compose-lints/blob/main/compose-lint-checks/src/main/java/slack/lint/compose/PreviewPublicDetector.kt"><code>ComposePreviewPublic</code></a></p>
<blockquote>
<p><strong>Note</strong>: If you are using Detekt, this may conflict with Detekt&rsquo;s <a href="https://detekt.dev/docs/rules/style/#unusedprivatemember">UnusedPrivateMember rule</a>.
Be sure to set Detekt&rsquo;s <a href="https://detekt.dev/docs/introduction/compose/#unusedprivatemember">ignoreAnnotated configuration</a> to [&lsquo;Preview&rsquo;] for compatibility with this rule.</p>
</blockquote>
<h2 id="modifiers">Modifiers<a class="headerlink" href="#modifiers" title="Permanent link">&para;</a></h2>
<h3 id="when-should-i-expose-modifier-parameters">When should I expose modifier parameters?<a class="headerlink" href="#when-should-i-expose-modifier-parameters" title="Permanent link">&para;</a></h3>
<p>Modifiers are the beating heart of Compose UI. They encapsulate the idea of composition over inheritance, by allowing developers to attach logic and behavior to layouts.</p>
<p>They are especially important for your public components, as they allow callers to customize the component to their wishes.</p>
<p>More info: <a href="https://chrisbanes.me/posts/always-provide-a-modifier/">Always provide a Modifier parameter</a></p>
<p>Related rule: <a href="https://github.com/slackhq/compose-lints/blob/main/compose-lint-checks/src/main/java/slack/lint/compose/ModifierMissingDetector.kt"><code>ComposeModifierMissing</code></a></p>
<div class="admonition note">
<p class="admonition-title">Configuration</p>
<p>By default, this rule will only check for modifiers in public methods. However, you can configure the threshold via using <code>visibility-threshold</code> option in <code>lint.xml</code>.</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;issue</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;ComposeModifierMissing&quot;</span><span class="nt">&gt;</span>
<span class="w">   </span><span class="nt">&lt;option</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;visibility-threshold&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;only_public&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;/issue&gt;</span>
</code></pre></div>
</div>
<p>Possible values are:</p>
<ul>
<li><code>only_public</code>: (default) Will check for missing modifiers only for public composables.</li>
<li><code>public_and_internal</code>: Will check for missing modifiers in both public and internal composables.</li>
<li><code>all</code>: Will check for missing modifiers in all composables.</li>
</ul>
<h3 id="dont-re-use-modifiers">Don&rsquo;t re-use modifiers<a class="headerlink" href="#dont-re-use-modifiers" title="Permanent link">&para;</a></h3>
<p>Modifiers which are passed in are designed so that they should be used by a single layout node in the composable function. If the provided modifier is used by multiple composables at different levels, unwanted behaviour can happen.</p>
<p>In the following example we&rsquo;ve exposed a public modifier parameter, and then passed it to the root Column, but we&rsquo;ve also passed it to each of the descendant calls, with some extra modifiers on top:</p>
<p><div class="highlight"><pre><span></span><code><span class="nd">@Composable</span>
<span class="kd">private</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="nf">InnerContent</span><span class="p">(</span><span class="n">modifier</span><span class="p">:</span><span class="w"> </span><span class="n">Modifier</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Modifier</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">Column</span><span class="p">(</span><span class="n">modifier</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Text</span><span class="p">(</span><span class="n">modifier</span><span class="p">.</span><span class="na">clickable</span><span class="p">(),</span><span class="w"> </span><span class="p">...)</span>
<span class="w">        </span><span class="n">Image</span><span class="p">(</span><span class="n">modifier</span><span class="p">.</span><span class="na">size</span><span class="p">(),</span><span class="w"> </span><span class="p">...)</span>
<span class="w">        </span><span class="n">Button</span><span class="p">(</span><span class="n">modifier</span><span class="p">,</span><span class="w"> </span><span class="p">...)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
This is not recommended. Instead, the provided modifier should only be used on the Column. The descendant calls should use newly built modifiers, by using the empty Modifier object:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@Composable</span>
<span class="kd">private</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="nf">InnerContent</span><span class="p">(</span><span class="n">modifier</span><span class="p">:</span><span class="w"> </span><span class="n">Modifier</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Modifier</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">Column</span><span class="p">(</span><span class="n">modifier</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Text</span><span class="p">(</span><span class="n">Modifier</span><span class="p">.</span><span class="na">clickable</span><span class="p">(),</span><span class="w"> </span><span class="p">...)</span>
<span class="w">        </span><span class="n">Image</span><span class="p">(</span><span class="n">Modifier</span><span class="p">.</span><span class="na">size</span><span class="p">(),</span><span class="w"> </span><span class="p">...)</span>
<span class="w">        </span><span class="n">Button</span><span class="p">(</span><span class="n">Modifier</span><span class="p">,</span><span class="w"> </span><span class="p">...)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Related rule: <a href="https://github.com/slackhq/compose-lints/blob/main/compose-lint-checks/src/main/java/slack/lint/compose/ModifierReusedDetector.kt"><code>ComposeModifierReused</code></a></p>
<h3 id="modifiers-should-have-default-parameters">Modifiers should have default parameters<a class="headerlink" href="#modifiers-should-have-default-parameters" title="Permanent link">&para;</a></h3>
<p>Composables that accept a Modifier as a parameter to be applied to the whole component represented by the composable function should name the parameter modifier and assign the parameter a default value of <code>Modifier</code>. It should appear as the first optional parameter in the parameter list; after all required parameters (except for trailing lambda parameters) but before any other parameters with default values. Any default modifiers desired by a composable function should come after the modifier parameter&rsquo;s value in the composable function&rsquo;s implementation, keeping Modifier as the default parameter value.</p>
<p>More info: <a href="https://developer.android.com/reference/kotlin/androidx/compose/ui/Modifier">Modifier documentation</a></p>
<p>Related rule: <a href="https://github.com/slackhq/compose-lints/blob/main/compose-lint-checks/src/main/java/slack/lint/compose/ModifierWithoutDefaultDetector.kt"><code>ComposeModifierWithoutDefault</code></a></p>
<h3 id="avoid-modifier-extension-factory-functions">Avoid Modifier extension factory functions<a class="headerlink" href="#avoid-modifier-extension-factory-functions" title="Permanent link">&para;</a></h3>
<p>Using <code>@Composable</code> builder functions for modifiers is not recommended, as they cause unnecessary recompositions. To avoid this, you should use <code>Modifier.Node</code> instead, as it limits recomposition to just the modifier instance, rather than the whole function tree.</p>
<p>Composed modifiers may be created outside of composition, shared across elements, and declared as top-level constants, making them more flexible than modifiers that can only be created via a <code>@Composable</code> function call, and easier to avoid accidentally sharing state across elements.</p>
<p>More info: <a href="https://developer.android.com/reference/kotlin/androidx/compose/ui/package-summary#extension-functions">Modifier extensions</a>, <a href="https://jorgecastillo.dev/composed-modifiers-in-jetpack-compose">Composed modifiers in Jetpack Compose by Jorge Castillo</a> and <a href="https://developer.android.com/jetpack/compose/custom-modifiers">Custom Modifiers</a></p>
<p>Related rule: <a href="https://github.com/slackhq/compose-lints/blob/main/compose-lint-checks/src/main/java/slack/lint/compose/ModifierComposableDetector.kt"><code>ComposeComposableModifier</code></a></p>
<h3 id="migrate-to-modifiernode">Migrate to <code>Modifier.Node</code><a class="headerlink" href="#migrate-to-modifiernode" title="Permanent link">&para;</a></h3>
<p><code>Modifier.composed { ... }</code> is no longer recommended due to performance issues.</p>
<p>You should use the <a href="https://developer.android.com/jetpack/compose/custom-modifiers#implement-custom"><code>Modifier.Node</code></a> API instead, as it was designed from the ground up to be far more performant than composed modifiers.</p>
<p>Related rule: <a href="https://github.com/slackhq/compose-lints/blob/main/compose-lint-checks/src/main/java/slack/lint/compose/ModifierComposedDetector.kt"><code>ComposeModifierComposed</code></a></p>
<h2 id="use-material-3">Use Material 3<a class="headerlink" href="#use-material-3" title="Permanent link">&para;</a></h2>
<p>Rule: <a href="https://github.com/slackhq/compose-lints/blob/main/compose-lint-checks/src/main/java/slack/lint/compose/M2ApiDetector.kt"><code>ComposeM2Api</code></a></p>
<p>Material 3 (M3) reached stable in October 2022. In apps that have migrated to M3, there may be <code>androidx.compose.material</code> (M2) APIs still remaining on the classpath from libraries or dependencies that can cause confusing imports due to the many similar or colliding Composable names in the two libraries. The <code>ComposeM2Api</code> rule can prevent these from being used.</p>
<div class="admonition warning">
<p class="admonition-title">Lint Configuration</p>
<p>This rule is disabled default and is <strong>opt-in</strong>.</p>
<p>You can enable it via the <code>lint</code> DSL in Gradle:
<div class="highlight"><pre><span></span><code><span class="n">android</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">lint</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">enable</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="s">&quot;ComposeM2Api&quot;</span>
<span class="w">    </span><span class="n">error</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="s">&quot;ComposeM2Api&quot;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
Or in <code>lint.xml</code>:
<div class="highlight"><pre><span></span><code><span class="nt">&lt;lint&gt;</span>
<span class="w">  </span><span class="nt">&lt;issue</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;ComposeM2Api&quot;</span><span class="w"> </span><span class="na">severity=</span><span class="s">&quot;error&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/lint&gt;</span>
</code></pre></div>
More lint configuration docs can be found <a href="https://developer.android.com/studio/write/lint#gradle">here</a>.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Allow-list Configuration</p>
<p>To allow certain APIs (i.e. for incremental migration), you can configure a <code>allowed-m2-apis</code> option in <code>lint.xml</code>.
<div class="highlight"><pre><span></span><code><span class="nt">&lt;issue</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;ComposeM2Api&quot;</span><span class="w">  </span><span class="na">severity=</span><span class="s">&quot;error&quot;</span><span class="nt">&gt;</span>
<span class="w">   </span><span class="nt">&lt;option</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;allowed-m2-apis&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;Text,Surface&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;/issue&gt;</span>
</code></pre></div></p>
</div>
<div class="admonition note">
<p class="admonition-title">Name mangling</p>
<p>Kotlin will mangle the names of internal functions, which may match when resolving functions due to overloads. compose-lints will attempt to unmangle these names to match any in an allow-list, but can be disabled in case of any issues by setting the <code>enable-mangling-workaround</code> option in <code>lint.xml</code> to false.
<div class="highlight"><pre><span></span><code><span class="nt">&lt;issue</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;ComposeM2Api&quot;</span><span class="w">  </span><span class="na">severity=</span><span class="s">&quot;error&quot;</span><span class="nt">&gt;</span>
<span class="w">   </span><span class="nt">&lt;option</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;enable-mangling-workaround&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;false&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;/issue&gt;</span>
</code></pre></div></p>
</div>
<p><strong>Related docs links</strong></p>
<ul>
<li>Announcement post: <a href="https://material.io/blog/material-3-compose-stable">https://material.io/blog/material-3-compose-stable</a></li>
<li>Docs: <a href="https://m3.material.io/develop/android/jetpack-compose">https://m3.material.io/develop/android/jetpack-compose</a></li>
<li>Migration guide: <a href="https://developer.android.com/jetpack/compose/themes/material2-material3">https://developer.android.com/jetpack/compose/themes/material2-material3</a></li>
<li>Guidance: <a href="https://developer.android.com/jetpack/compose/themes/material3">https://developer.android.com/jetpack/compose/themes/material3</a></li>
<li>Reply (primary sample app): <a href="https://github.com/android/compose-samples/tree/main/Reply">https://github.com/android/compose-samples/tree/main/Reply</a></li>
<li>More samples: <a href="https://github.com/android/compose-samples">https://github.com/android/compose-samples</a></li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2023 Salesforce, Inc.
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.525ec568.min.js"></script>
      
    
  </body>
</html>